!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).markdownItPagenumbers=e()}}(function(){return function(){return function e(n,t,r){function o(f,u){if(!t[f]){if(!n[f]){var p="function"==typeof require&&require;if(!u&&p)return p(f,!0);if(i)return i(f,!0);var l=new Error("Cannot find module '"+f+"'");throw l.code="MODULE_NOT_FOUND",l}var s=t[f]={exports:{}};n[f][0].call(s.exports,function(e){return o(n[f][1][e]||e)},s,s.exports,e,n,t,r)}return t[f].exports}for(var i="function"==typeof require&&require,f=0;f<r.length;f++)o(r[f]);return o}}()({1:[function(e,n,t){"use strict";function r(e){let n,t;function r(t){let r,o=!1;return-1===t.indexOf("[pg")?(r=new e.Token("text","",0)).content=t:((r=new e.Token("pagenumber","",0)).content=t.replace(/^\[pg\s*([^\]]+)]/,"$1"),o=!0),n.push(r),o}for(let o=0;o<e.tokens.length;o++){let i=e.tokens[o],f=!1;if("inline"===i.type){n=[],t=0;for(let e=0;e<i.children.length;e++){let o=i.children[e];"link_open"===o.type||"link_close"===o.type?(t+=o.nesting,n.push(o)):0===t&&"text"===o.type&&-1!==o.content.indexOf("[pg")?f=o.content.split(/(\[pg\s*[^\]]+\])/).filter(e=>e.length).map(r).filter(e=>e).length>0||f:n.push(o)}i.children=n,1===n.length&&f&&o>0&&o<e.tokens.length-1&&"paragraph_open"===e.tokens[o-1].type&&"paragraph_close"===e.tokens[o+1].type&&(e.tokens.splice(o-1,3,n[0],new e.Token("softbreak")),o--)}}}n.exports=function(e){e.renderer.rules.pagenumber=function(e,n){return'<a data-pg="'+e[n].content+'">'+e[n].content+"</a>"},e.core.ruler.push("pagenumber",r)}},{}]},{},[1])(1)});
